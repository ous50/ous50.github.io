<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>VPN on ousfifty&#39;s blog</title>
        <link>http://localhost:1313/zh-cn/tags/vpn/</link>
        <description>Recent content in VPN on ousfifty&#39;s blog</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>zh-cn</language>
        <lastBuildDate>Thu, 17 Feb 2022 00:10:24 +0000</lastBuildDate><atom:link href="http://localhost:1313/zh-cn/tags/vpn/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>关于 Prebuilt VPN 与 cgproxy 打架的这件事</title>
        <link>http://localhost:1313/zh-cn/p/%E5%85%B3%E4%BA%8E-prebuilt-vpn-%E4%B8%8E-cgproxy-%E6%89%93%E6%9E%B6%E7%9A%84%E8%BF%99%E4%BB%B6%E4%BA%8B/</link>
        <pubDate>Thu, 17 Feb 2022 00:10:24 +0000</pubDate>
        
        <guid>http://localhost:1313/zh-cn/p/%E5%85%B3%E4%BA%8E-prebuilt-vpn-%E4%B8%8E-cgproxy-%E6%89%93%E6%9E%B6%E7%9A%84%E8%BF%99%E4%BB%B6%E4%BA%8B/</guid>
        <description>&lt;h1 id=&#34;关于-prebuilt-vpn-与-cgproxy-打架的这件事&#34;&gt;关于 Prebuilt VPN 与 cgproxy 打架的这件事&lt;/h1&gt;
&lt;h2 id=&#34;update&#34;&gt;Update&lt;/h2&gt;
&lt;p&gt;2022-02-17: Initial post&lt;/p&gt;
&lt;p&gt;2022-03-23: 看完log 找到了最终方法&lt;/p&gt;
&lt;p&gt;2022-11-09: 早就换到漏油器了 舒服多了（&lt;/p&gt;
&lt;h2 id=&#34;太长不看版&#34;&gt;太长不看版&lt;/h2&gt;
&lt;p&gt;直接跳到&lt;a class=&#34;link&#34; href=&#34;#%e6%9c%80%e7%bb%88%e8%a7%a3%e5%86%b3%e6%96%b9%e6%b3%95&#34; &gt;最终解决方法&lt;/a&gt;模块&lt;/p&gt;
&lt;h2 id=&#34;intro&#34;&gt;Intro&lt;/h2&gt;
&lt;p&gt;由于众所周知的原因，咱24/7挂着代理。&lt;/p&gt;
&lt;p&gt;因为linux有太多应用不看http_proxy变量，咱一直开着 cgproxy 来代理全机流量，一直都没有问题&lt;/p&gt;
&lt;p&gt;直到咱需要使用学校网络而尝试连接学校VPN。&lt;/p&gt;
&lt;p&gt;&lt;del&gt;咕咕了好久之后，咱终于下定决心处理它。&lt;/del&gt;&lt;/p&gt;
&lt;h2 id=&#34;现象&#34;&gt;现象&lt;/h2&gt;
&lt;p&gt;正常上网的时候想连接学校的L2TP/IPsec VPN，打开 networkmanager 的 控制面板并点击连接VPN后它一直在转圈却没有成功&lt;/p&gt;
&lt;h2 id=&#34;分析与解决&#34;&gt;分析与解决&lt;/h2&gt;
&lt;p&gt;直接查看一手log&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-zsh&#34; data-lang=&#34;zsh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo journalctl -f
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;再重复一次操作即可看到实时的log。在这里咱看到了这么一段：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Feb &lt;span class=&#34;m&#34;&gt;16&lt;/span&gt; 23:51:49 testOnArch kded5&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;939&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: org.kde.plasma.nm.kded: Unhandled VPN connection state change:  &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Feb &lt;span class=&#34;m&#34;&gt;16&lt;/span&gt; 23:51:49 testOnArch akonadi_sendlater_agent&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;1283&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;Object does not exist at path “/org/freedesktop/NetworkManager/ActiveConnection/2”&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Feb &lt;span class=&#34;m&#34;&gt;16&lt;/span&gt; 23:51:49 testOnArch kmail&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;1269&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;Object does not exist at path “/org/freedesktop/NetworkManager/ActiveConnection/2”&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Feb &lt;span class=&#34;m&#34;&gt;16&lt;/span&gt; 23:51:49 testOnArch akonadi_mailmerge_agent&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;1278&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;Object does not exist at path “/org/freedesktop/NetworkManager/ActiveConnection/2”&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Feb &lt;span class=&#34;m&#34;&gt;16&lt;/span&gt; 23:51:49 testOnArch akonadi_followupreminder_agent&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;1260&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;Object does not exist at path “/org/freedesktop/NetworkManager/ActiveConnection/2”&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Feb &lt;span class=&#34;m&#34;&gt;16&lt;/span&gt; 23:51:49 testOnArch akonadi_imap_resource&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;1262&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;Object does not exist at path “/org/freedesktop/NetworkManager/ActiveConnection/2”&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Feb &lt;span class=&#34;m&#34;&gt;16&lt;/span&gt; 23:51:49 testOnArch qv2ray&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;1456&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;Object does not exist at path “/org/freedesktop/NetworkManager/ActiveConnection/2”&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Feb &lt;span class=&#34;m&#34;&gt;16&lt;/span&gt; 23:51:49 testOnArch akonadi_maildispatcher_agent&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;1276&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;Object does not exist at path “/org/freedesktop/NetworkManager/ActiveConnection/2”&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Feb &lt;span class=&#34;m&#34;&gt;16&lt;/span&gt; 23:51:49 testOnArch kgpg&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;1244&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;Object does not exist at path “/org/freedesktop/NetworkManager/ActiveConnection/2”&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Feb &lt;span class=&#34;m&#34;&gt;16&lt;/span&gt; 23:51:49 testOnArch akonadi_davgroupware_resource&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;1257&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;Object does not exist at path “/org/freedesktop/NetworkManager/ActiveConnection/2”&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Feb &lt;span class=&#34;m&#34;&gt;16&lt;/span&gt; 23:51:49 testOnArch akonadi_notes_agent&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;1282&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;Object does not exist at path “/org/freedesktop/NetworkManager/ActiveConnection/2”&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Feb &lt;span class=&#34;m&#34;&gt;16&lt;/span&gt; 23:51:49 testOnArch DiscoverNotifier&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;1053&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;Object does not exist at path “/org/freedesktop/NetworkManager/ActiveConnection/2”&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Feb &lt;span class=&#34;m&#34;&gt;16&lt;/span&gt; 23:51:49 testOnArch akonadi_sendlater_agent&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;1283&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;Object does not exist at path “/org/freedesktop/NetworkManager/ActiveConnection/2”&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Feb &lt;span class=&#34;m&#34;&gt;16&lt;/span&gt; 23:51:49 testOnArch akonadi_followupreminder_agent&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;1260&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;Object does not exist at path “/org/freedesktop/NetworkManager/ActiveConnection/2”&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Feb &lt;span class=&#34;m&#34;&gt;16&lt;/span&gt; 23:51:49 testOnArch akonadi_maildispatcher_agent&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;1276&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;Object does not exist at path “/org/freedesktop/NetworkManager/ActiveConnection/2”&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Feb &lt;span class=&#34;m&#34;&gt;16&lt;/span&gt; 23:51:49 testOnArch akonadi_davgroupware_resource&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;1257&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;Object does not exist at path “/org/freedesktop/NetworkManager/ActiveConnection/2”&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Feb &lt;span class=&#34;m&#34;&gt;16&lt;/span&gt; 23:51:49 testOnArch akonadi_imap_resource&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;1262&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;Object does not exist at path “/org/freedesktop/NetworkManager/ActiveConnection/2”&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Feb &lt;span class=&#34;m&#34;&gt;16&lt;/span&gt; 23:51:49 testOnArch akonadi_notes_agent&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;1282&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;Object does not exist at path “/org/freedesktop/NetworkManager/ActiveConnection/2”&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Feb &lt;span class=&#34;m&#34;&gt;16&lt;/span&gt; 23:51:49 testOnArch akonadi_mailmerge_agent&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;1278&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;Object does not exist at path “/org/freedesktop/NetworkManager/ActiveConnection/2”&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Feb &lt;span class=&#34;m&#34;&gt;16&lt;/span&gt; 23:51:49 testOnArch DiscoverNotifier&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;1053&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;Object does not exist at path “/org/freedesktop/NetworkManager/ActiveConnection/2”&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Feb &lt;span class=&#34;m&#34;&gt;16&lt;/span&gt; 23:51:49 testOnArch qv2ray&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;1456&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;Object does not exist at path “/org/freedesktop/NetworkManager/ActiveConnection/2”&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Feb &lt;span class=&#34;m&#34;&gt;16&lt;/span&gt; 23:51:49 testOnArch kded5&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;939&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: org.kde.plasma.nm.kded: Unhandled VPN connection state change:  &lt;span class=&#34;m&#34;&gt;3&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Feb &lt;span class=&#34;m&#34;&gt;16&lt;/span&gt; 23:51:49 testOnArch NetworkManager&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;594&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: &amp;lt;info&amp;gt;  &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;11&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; vpn-connection&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;foobar&amp;#34;&lt;/span&gt;,0&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: VPN connection: &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;ConnectInteractive&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; reply received
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Feb &lt;span class=&#34;m&#34;&gt;16&lt;/span&gt; 23:51:49 testOnArch nm-l2tp-service&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;31487&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: Check port &lt;span class=&#34;m&#34;&gt;1701&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;嗯，有个qv2ray在这里 大概是cgproxy把VPN位子占了（？）试试看把这玩意关掉：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;systemctl stop cgproxy
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;再试一次 VPN就连接上了（&lt;/p&gt;
&lt;p&gt;以前在用Windows的时候，clash是直接整了个tun网卡来实现全局代理的。现在咱用qv2ray+cgproxy，就发现了这个问题，但是一直都没有去仔细debug，&lt;del&gt;大概这就是咕咕咕吧&lt;/del&gt;&lt;/p&gt;
&lt;h2 id=&#34;在这之后&#34;&gt;在这之后&lt;/h2&gt;
&lt;p&gt;之后发现了关掉cgproxy之后连接vpn 再开cgproxy也能正常用&lt;/p&gt;
&lt;h2 id=&#34;直到2022-03-23&#34;&gt;直到2022-03-23&lt;/h2&gt;
&lt;p&gt;今天被 LetITFly 大佬在他的频道推荐了这篇文章 咱受宠若惊 于是下定决心写完它 &lt;del&gt;不咕了不咕了不敢咕了&lt;/del&gt;&lt;/p&gt;
&lt;p&gt;经过群友提醒 cgproxy可以设置不代理的软件&lt;/p&gt;
&lt;p&gt;再跑了一遍 log ：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;47
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;48
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;49
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;50
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;51
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;52
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  nm-l2tp-service&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;39691&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: xl2tpd started with pid &lt;span class=&#34;m&#34;&gt;39768&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  NetworkManager&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;39768&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: xl2tpd&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;39768&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: Not looking &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; kernel SAref support.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  kernel: PPP generic driver version 2.4.2
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  kernel: NET: Registered PF_PPPOX protocol family
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  kernel: l2tp_core: L2TP core driver, V2.0
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  kernel: l2tp_netlink: L2TP netlink interface
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  NetworkManager&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;39768&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: xl2tpd&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;39768&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: Using l2tp kernel support.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  NetworkManager&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;39768&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: xl2tpd&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;39768&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: xl2tpd version xl2tpd-1.3.17 started on yukinodaisuki PID:39768
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  NetworkManager&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;39768&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: xl2tpd&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;39768&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: Written by Mark Spencer, Copyright &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;C&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; 1998, Adtran, Inc.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  NetworkManager&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;39768&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: xl2tpd&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;39768&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: Forked by Scott Balmos and David Stipp, &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;C&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;2001&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  NetworkManager&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;39768&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: xl2tpd&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;39768&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: Inherited by Jeff McAdams, &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;C&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;2002&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  NetworkManager&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;39768&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: xl2tpd&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;39768&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: Forked again by Xelerance &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;www.xelerance.com&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;C&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; 2006-2016
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  NetworkManager&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;39768&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: xl2tpd&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;39768&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: Listening on IP address 0.0.0.0, port &lt;span class=&#34;m&#34;&gt;1701&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  NetworkManager&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;39768&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: xl2tpd&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;39768&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: Connecting to host &lt;span class=&#34;nv&#34;&gt;$destinationIP&lt;/span&gt;, port &lt;span class=&#34;m&#34;&gt;1701&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  kernel: l2tp_ppp: PPPoL2TP kernel driver, V2.0
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  NetworkManager&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;39768&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: xl2tpd&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;39768&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: Connection established to &lt;span class=&#34;nv&#34;&gt;$destinationIP&lt;/span&gt;, 1701.  Local: 39853, Remote: &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;ref&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;0/0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  NetworkManager&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;39768&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: xl2tpd&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;39768&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: Calling on tunnel &lt;span class=&#34;m&#34;&gt;39853&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  NetworkManager&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;39768&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: xl2tpd&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;39768&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: Call established with &lt;span class=&#34;nv&#34;&gt;$destinationIP&lt;/span&gt;, Local: 6356, Remote: 1, Serial: &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;ref&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;0/0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  NetworkManager&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;39768&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: xl2tpd&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;39768&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: start_pppd: I&lt;span class=&#34;s1&#34;&gt;&amp;#39;m running:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;  NetworkManager[39768]: xl2tpd[39768]: &amp;#34;/usr/sbin/pppd&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;  NetworkManager[39768]: xl2tpd[39768]: &amp;#34;plugin&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;  NetworkManager[39768]: xl2tpd[39768]: &amp;#34;pppol2tp.so&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;  NetworkManager[39768]: xl2tpd[39768]: &amp;#34;pppol2tp&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;  NetworkManager[39768]: xl2tpd[39768]: &amp;#34;7&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;  NetworkManager[39768]: xl2tpd[39768]: &amp;#34;passive&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;  NetworkManager[39768]: xl2tpd[39768]: &amp;#34;nodetach&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;  NetworkManager[39768]: xl2tpd[39768]: &amp;#34;:&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;  NetworkManager[39768]: xl2tpd[39768]: &amp;#34;file&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;  NetworkManager[39768]: xl2tpd[39768]: &amp;#34;/var/run/nm-l2tp-114514/ppp-options&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;  pppd[39773]: Plugin pppol2tp.so loaded.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;  pppd[39773]: Plugin /usr/lib/pppd/2.4.9/nm-l2tp-pppd-plugin.so loaded.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;  pppd[39773]: pppd 2.4.9 started by root, uid 0
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;  pppd[39773]: Using interface ppp0
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;  pppd[39773]: Connect: ppp0 &amp;lt;--&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;  pppd[39773]: Overriding mtu 1500 to 1400
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;  pppd[39773]: Overriding mru 1500 to mtu value 1400
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;  systemd-udevd[39745]: Using default interface naming scheme &amp;#39;&lt;/span&gt;v250&lt;span class=&#34;err&#34;&gt;&amp;#39;&lt;/span&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  NetworkManager&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;621&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: &amp;lt;info&amp;gt;  &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;1145.141919&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; manager: &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;ppp0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;: new Ppp device &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;/org/freedesktop/NetworkManager/Devices/10&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  pppd&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;39773&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: Overriding mtu &lt;span class=&#34;m&#34;&gt;1500&lt;/span&gt; to &lt;span class=&#34;m&#34;&gt;1400&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  pppd&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;39773&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: PAP authentication succeeded
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  charon&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;39715&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: 10&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;KNL&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$vpnInnerIP&lt;/span&gt; appeared on ppp0
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  charon-systemd&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;744&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: &lt;span class=&#34;nv&#34;&gt;$vpnInnerIP&lt;/span&gt; appeared on ppp0
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  charon&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;39715&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: 07&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;KNL&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$vpnInnerIP&lt;/span&gt; disappeared from ppp0
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  charon-systemd&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;744&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: &lt;span class=&#34;nv&#34;&gt;$vpnInnerIP&lt;/span&gt; disappeared from ppp0
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  charon&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;39715&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: 14&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;KNL&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$vpnInnerIP&lt;/span&gt; appeared on ppp0
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  charon-systemd&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;744&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: &lt;span class=&#34;nv&#34;&gt;$vpnInnerIP&lt;/span&gt; appeared on ppp0
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  charon&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;39715&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: 15&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;KNL&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; interface ppp0 activated
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  charon-systemd&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;744&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: interface ppp0 activated
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  pppd&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;39773&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: Cannot determine ethernet address &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; proxy ARP
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  pppd&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;39773&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: &lt;span class=&#34;nb&#34;&gt;local&lt;/span&gt;  IP address &lt;span class=&#34;nv&#34;&gt;$vpnInnerIP&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  pppd&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;39773&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: remote IP address &lt;span class=&#34;nv&#34;&gt;$remoteIP&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  pppd&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;39773&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: primary   DNS address &lt;span class=&#34;nv&#34;&gt;$dnsAddress&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;在这之中 找到了 pppd  xl2tpd nm-l2tp-service 这几个玩意 大概就是这些了吧&lt;/p&gt;
&lt;p&gt;然后试试将这几个软件加进去 config.json 的 program_noproxy 栏里面：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo nano /etc/cgproxy/config.json
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;hr&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &amp;#34;comment&amp;#34;:&amp;#34;For usage, see https://github.com/springzfx/cgproxy&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &amp;#34;port&amp;#34;: 12345,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &amp;#34;program_noproxy&amp;#34;: [&amp;#34;v2ray&amp;#34;, &amp;#34;qv2ray&amp;#34;, &amp;#34;nm-l2tp-service&amp;#34;, &amp;#34;xl2tpd&amp;#34;, &amp;#34;pppd&amp;#34; ],
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &amp;#34;program_proxy&amp;#34;: [],
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &amp;#34;cgroup_noproxy&amp;#34;: [&amp;#34;/system.slice/v2ray.service&amp;#34;],
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &amp;#34;cgroup_proxy&amp;#34;: [&amp;#34;/&amp;#34;],
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &amp;#34;enable_gateway&amp;#34;: ture,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &amp;#34;enable_dns&amp;#34;: true,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &amp;#34;enable_udp&amp;#34;: true,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &amp;#34;enable_tcp&amp;#34;: true,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &amp;#34;enable_ipv4&amp;#34;: true,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &amp;#34;enable_ipv6&amp;#34;: true,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &amp;#34;table&amp;#34;: 10007,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &amp;#34;fwmark&amp;#34;: 39283
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;不要照抄咱的config 请按照自己的情况判断&lt;/p&gt;
&lt;p&gt;保存后重启 cgproxy.service:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo systemctl restart cgproxy.service
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;del&gt;然后再测试一下，噔噔！好了！OwO&lt;/del&gt; 好个鬼头 原来是忘记检查一遍config  多打了一个逗号直接 core dump了（&lt;/p&gt;
&lt;p&gt;再仔细看看还有什么问题（（（&lt;/p&gt;
&lt;h2 id=&#34;最终解决方法&#34;&gt;最终解决方法&lt;/h2&gt;
&lt;p&gt;还是先用回  &lt;a class=&#34;link&#34; href=&#34;#%e5%88%86%e6%9e%90%e4%b8%8e%e8%a7%a3%e5%86%b3&#34; &gt;一开始的那个用法&lt;/a&gt;吧（&lt;/p&gt;
</description>
        </item>
        
    </channel>
</rss>
