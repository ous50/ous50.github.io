[{"content":"Intro Lenovo Legion series Laptops uses IdeaPad ACPI and ones in normal configuration can use nearly all of the function keys except for F9(Favorite key), F11(tab switching key) and F12(Calculator key), since ACPI key functions is not defined:\nsudo acpi_listen 8FC0DE0C-B4E4- 000000d0 00000000 #F9 ^[^[[27;5;9~ #F11 8FC0DE0C-B4E4- 000000d0 00000000 #F12 But for users have \u0026ldquo;discrete graphics\u0026rdquo; option switched on in BIOS, F5(Brightness Up) and F6(Brightness Down) is not working, although running acpi_listen shows everything is normal:\nsudo acpi_listen video/brightnessup BRTUP 00000086 00000000 #F6 video/brightnessdown BRTDN 00000087 00000000 #F5 ​\tThe reason is the device controlling backlight now has changed to nvidia_0, not correspond to the defined acpi actions. For Arch Linux users You can install xbacklight to tweak the backlight via command line. But that experience is extremely awful: everytime you want to adjust, you have to turn on console and run xbacklight with root permission. This article is aimed to fix the malfunctioned key.\n​\tREMEMBER: you still can not adjust brightness in \u0026ldquo;battery and brightness\u0026rdquo;.\nSolution ​\tJust create these files and reboot.\n/etc/acpi/events/FnF6-brightnessup #FnF6 video/brightnessup BRTUP 00000086 00000000 event=video/brightnessup action=/etc/acpi/actions/FnF6-brightnessup.sh /etc/acpi/actions/FnF6-brightnessup.sh #!/bin/bash # Set the static increment value. Keep in mind that this will # be done twice. # This Value is depended on the actual changing value of the DE(in KDE it\u0026#39;s 6) IncVal=6 # Get the Maximum value for use. #MaxVal=$(cat /sys/class/backlight/intel_backlight/max_brightness); read -r MaxVal \u0026lt; \u0026#34;/sys/class/backlight/nvidia_0/max_brightness\u0026#34; # Get the current brightness value. #CurrVal=$(cat /sys/class/backlight/nvidia_0/brightness); read -r CurrVal \u0026lt; \u0026#34;/sys/class/backlight/nvidia_0/brightness\u0026#34; # Set the new value minus the decrement value. NewVal=$(($CurrVal + $IncVal)); echo $NewVal # Set it to the threshold of the max value. ThresholdVal=$(($NewVal\u0026lt;$MaxVal?$NewVal:$MaxVal)) echo $ThresholdVal # Set the new value directly. echo -n $ThresholdVal \u0026gt; /sys/class/backlight/nvidia_0/brightness logger \u0026#34;[ACPI] brightnessup |$CurrVal| |$NewVal| |$ThresholdVal|\u0026#34; /etc/acpi/events/FnF5-brightnessdown #FnF5 video/brightnessdown BRTDN 00000087 00000000 event=video/brightnessdown action=/etc/acpi/actions/FnF5-brightnessdown.sh /etc/acpi/actions/FnF5-brightnessdown.sh #!/bin/bash # Set the static decrement value. Keep in mind that this will # be done twice. # This Value is depended on the actual changing value of the DE(in KDE it\u0026#39;s 6) DecVal=6 # Set the Minimum we will accept. MinVal=0 # Get the current brightness value. #CurrVal=$(cat /sys/class/backlight/nvidia_0/brightness); read -r CurrVal \u0026lt; \u0026#34;/sys/class/backlight/nvidia_0/brightness\u0026#34; # Set the new value minus the decrement value. NewVal=$(($CurrVal - $DecVal)); echo $NewVal # Set it to the threshold of the min value. ThresholdVal=$(($NewVal\u0026gt;$MinVal?$NewVal:$MinVal)) echo $ThresholdVal # Set the new value directly. echo -n $ThresholdVal \u0026gt; /sys/class/backlight/nvidia_0/brightness logger \u0026#34;[ACPI] brightnessdown |$CurrVal| |$NewVal| |$ThresholdVal|\u0026#34; ","date":"2022-11-08T02:06:00Z","permalink":"https://blog.ous50.moe/post/fixing-the-brightness-function-keys-in-legion-laptops-with-discrete-graphics-option-enabled/","title":"Fixing the brightness function keys in Legion laptops with discrete graphics option enabled"},{"content":"Some useful markdown note taking codes Maths In-line maths(LaTeX?) expressions Turn on the \u0026ldquo;In-line Math Equation\u0026rdquo; option in your editor. In my editor Typora, you can turn it on in File\u0026gt;\u0026gt;Preferences\u0026gt;\u0026gt;Markdown\u0026gt;\u0026gt;Syntax Support\u0026gt;\u0026gt;Inline Math. Then just write as the following(Please don\u0026rsquo;t judge whether the equation is wrong or not, after all, this is just a demonstration.):\n$inline \\ math \\ example: \\ f(x)=x^2+y_2$ It will look like $inline \\ math \\ example: \\ f(x)=x^2+y_2$\nNote taking Changing the text and background colour Markdown is not able to change text number by default. But by writing HTML code, one could change the text color and bkg colour.\nHere\u0026rsquo;s an example\n\u0026lt;span style=\u0026#34;color:\u0026#39;the colour name or the html colour code\u0026#39;\u0026#34;\u0026gt;text\u0026lt;/span\u0026gt; //text colour \u0026lt;span style=\u0026#34;background-color:\u0026#39;the colour name or the html colour code\u0026#39;\u0026#34;\u0026gt;text\u0026lt;/span\u0026gt; //background colour blue\nyellow background colour\nMore interestingly, you could still use markdown format inside the html rendering:\n\u0026lt;span style=\u0026#34;background-color:#00ffff\u0026#34;\u0026gt;\u0026lt;span style=\u0026#34;color:red\u0026#34;\u0026gt;Red text\u0026lt;/span\u0026gt; in cyan background colour\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;background-color:#00ffff\u0026#34;\u0026gt;\u0026lt;span style=\u0026#34;color:red\u0026#34;\u0026gt;**Bold red text**\u0026lt;/span\u0026gt; in cyan background colour\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;background-color:#00ffff\u0026#34;\u0026gt;\u0026lt;span style=\u0026#34;color:red\u0026#34;\u0026gt;**Bold red $LaTeX$ expression**\u0026lt;/span\u0026gt; in cyan background colour\u0026lt;/span\u0026gt; Red text in cyan background colour\nBold red text in cyan background colour\nBold red $LaTeX$ expression in cyan background colour\n","date":"2022-09-16T16:00:00Z","permalink":"https://blog.ous50.moe/post/some-useful-markdown-note-taking-codes-en/","title":"Some useful markdown noting codes"},{"content":"How to make a combined brother printer driver AUR package TODO Analyze differences of file trees between the two types Analyze differences of the installation processes between the two types Intro Traditionally, Brother printers\u0026rsquo; drivers are divided with cupswrapper and lpr. The Arch-Wiki gives the solution on how to package them. But there\u0026rsquo;s some printers, e.g. DCP-B7500D and HL-L2350DW, have a combined driver with different file tree. This article is to record how I package.\nPreparation Arch-Linux PC (of cause) .deb or .rpm download link Have learn how to make AUR package https://wiki.archlinux.org/title/Arch_package_guidelines Write PKGBUILD Usually they have a common version 4.0.0\nJust make your own adaptation to my PKGBUILD (adapted from Roman Schmocker\u0026rsquo;s brother-hll2350dw package):\n# Maintainer: ous50 pkgname=brother-dcpb7500d printerModel=DCPB7500D pkgver=4.0.0 pkgrel=1 pkgdesc=\u0026#34;Printing driver for Brother DCP-B7500 printer\u0026#34; arch=(\u0026#34;i686\u0026#34; \u0026#34;x86_64\u0026#34; \u0026#34;armv7l\u0026#34;) //check the \u0026#39;/opt/brother/Printers/$printerModel/lpd\u0026#39; in the data.tar.gz url=\u0026#34;https://support.brother.com/g/b/producttop.aspx?c=in\u0026amp;lang=en\u0026amp;prod=dcpb7500d_as_cn\u0026#34; license=(\u0026#34;EULA\u0026#34;) groups=(\u0026#34;base-devel\u0026#34;) depends=(\u0026#39;cups\u0026#39; \u0026#39;ghostscript\u0026#39;) depends_x86_64=(\u0026#39;lib32-glibc\u0026#39;) install=\u0026#34;$pkgname.install\u0026#34; source=( \u0026#34;https://download.brother.com/welcome/dlf103663/dcpb7500dpdrv-$pkgver-1.i386.deb\u0026#34; \u0026#39;cupswrapper-license.txt\u0026#39; \u0026#39;lpr-license.txt\u0026#39; ) md5sums=( \u0026#34;c5d5c7febae0eab6254cb7332f4038c0\u0026#34; \u0026#39;97ad0cffd216059e9d1d3121899d8646\u0026#39; \u0026#39;5e87a3dc0f3e3438c088eda0f3565f0d\u0026#39; ) package(){ tar xf data.tar.gz // If you use .deb as your source, you must use this to fully decompress. (Not tested on .rpm packages) cp -R \u0026#34;$srcdir/opt\u0026#34; \u0026#34;$pkgdir/opt\u0026#34; ln -s \u0026#34;/opt/brother/Printers/DCPB7500D/lpd/$CARCH/rawtobr3\u0026#34; \u0026#34;$pkgdir/opt/brother/Printers/DCPB7500D/lpd/rawtobr3\u0026#34; ln -s \u0026#34;/opt/brother/Printers/DCPB7500D/lpd/$CARCH/brprintconflsr3\u0026#34; \u0026#34;$pkgdir/opt/brother/Printers/DCPB7500D/lpd/brprintconflsr3\u0026#34; install -d \u0026#34;$pkgdir/usr/lib/cups/filter/\u0026#34; ln -s \u0026#34;/opt/brother/Printers/DCPB7500D/cupswrapper/lpdwrapper\u0026#34; \u0026#34;$pkgdir/usr/lib/cups/filter/brother_lpdwrapper_DCPB7500D\u0026#34; install -d \u0026#34;$pkgdir/usr/share/cups/model/\u0026#34; ln -s \u0026#34;/opt/brother/Printers/DCPB7500D/cupswrapper/brother-DCPB7500D-cups-en.ppd\u0026#34; \u0026#34;$pkgdir/usr/share/cups/model\u0026#34; install -Dm644 \u0026#34;$srcdir/opt/brother/Printers/DCPB7500D/LICENSE_ENG.txt\u0026#34; \u0026#34;$pkgdir/usr/share/licenses/$pkgname/LICENSE_ENG.txt\u0026#34; install -Dm644 \u0026#34;$srcdir/opt/brother/Printers/DCPB7500D/LICENSE_JPN.txt\u0026#34; \u0026#34;$pkgdir/usr/share/licenses/$pkgname/LICENSE_JPN.txt\u0026#34; } Remember to get \u0026lsquo;cupswrapper-license.txt\u0026rsquo; and \u0026rsquo;lpr-license.txt\u0026rsquo; or just delete them from source\nFor better notice of user installation, you could write a xxx.install file to help(in my case the filename is brother-dcpb7500d.install):\npost_install() { post_upgrade; } post_upgrade() { echo \u0026#34;Restart CUPS service to load the new files\u0026#34; echo \u0026#34;You can now register your new printer using the web interface at:\u0026#34; echo \u0026#34; http://localhost:631/\u0026#34; } Test installation and upload After you have saved the PKGBUILD, do a test installation:\nmakepkg -rcsi restart cups.service after installation and go to check if your model has shown in the list:\nIf it\u0026rsquo;s shown, then you could upload it to AUR\nTips: In settings you might see an error like:\nFailed to search for a recommended driver: \u0026#39;The name org.fedoraproject.Config.Printing was not provided by any .service files\u0026#39; In this case you need to install system-config-printer package:\nsudo pacman -S system-config-printer Thanks Many thanks to Roman Schmocker. Without you it would be much harder to finish my AUR package and of course, this blog.\nThanks Arch-Wiki contributors for good documentations.\n","date":"2022-01-25T03:46:22Z","permalink":"https://blog.ous50.moe/post/how-to-make-a-combined-brother-printer-driver-aur-package/","title":"How to make a combined brother printer driver AUR package"}]